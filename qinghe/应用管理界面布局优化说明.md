# 青禾计划 iOS 应用管理界面布局优化说明

## 修改需求

根据用户要求对应用管理界面进行以下布局优化：

1. **应用列表标题和应用数量文字要有左右间距**
2. **将"选择应用"按钮移到应用列表下方**
3. **应用列表之间没有上下间距**

## 修改内容

### 1. 应用列表标题区域优化

**修改前**：
- 标题和应用数量文字紧贴屏幕边缘
- "选择应用"按钮位于标题行右侧

**修改后**：
```swift
// 应用列表标题和应用数量 - 添加左右间距
HStack {
    Text("应用列表")
        .font(.system(size: 18, weight: .semibold))
        .foregroundColor(.primary)

    Spacer()

    // 取消所有限制按钮
    if appRestrictionManager.activeRestrictions.count > 0 {
        // ... 按钮代码
    }

    Text("\(appUsageManager.appUnlockStatuses.count + getSavedAppsWithoutRules().count) 个应用")
        .font(.system(size: 14, weight: .medium))
        .foregroundColor(.secondary)
}
.padding(.horizontal, 16) // ✅ 添加左右间距
```

### 2. 应用列表间距优化

**修改前**：
- 应用卡片之间有 12pt 的上下间距
- 使用 `LazyVStack(spacing: 12)`

**修改后**：
```swift
// 应用列表 - 移除上下间距，添加左右间距
LazyVStack(spacing: 0) { // ✅ 改为 spacing: 0 移除上下间距
    // 显示已创建规则的应用
    ForEach(appUsageManager.appUnlockStatuses, id: \.id) { status in
        AppStatusCard(status: status)
            .padding(.horizontal, 16) // ✅ 添加左右间距
            .onTapGesture {
                selectedApp = status.appName
            }
    }

    // 显示保存但未创建规则的应用
    ForEach(Array(getSavedAppsWithoutRules().enumerated()), id: \.offset) { _, appInfo in
        SavedAppCard(appInfo: appInfo)
            .padding(.horizontal, 16) // ✅ 添加左右间距
            // ...
    }
}
```

### 3. "选择应用"按钮位置调整

**修改前**：
- 按钮位于标题行右侧，尺寸较小
- 与其他元素挤在一行

**修改后**：
```swift
// 选择应用按钮 - 移到应用列表下方
Button(action: {
    showingFamilyActivityPicker = true
}) {
    HStack(spacing: 8) {
        Image(systemName: "plus.circle.fill")
            .font(.system(size: 16))
        Text("选择应用")
            .font(.system(size: 16, weight: .medium)) // ✅ 增大字体
    }
    .foregroundColor(.white)
    .frame(maxWidth: .infinity) // ✅ 全宽按钮
    .frame(height: 48) // ✅ 增加按钮高度
    .background(
        LinearGradient(
            colors: [Color.blue, Color.purple],
            startPoint: .leading,
            endPoint: .trailing
        )
    )
    .cornerRadius(12)
}
.buttonStyle(PlainButtonStyle())
.padding(.horizontal, 16) // ✅ 添加左右间距
.padding(.top, 16) // ✅ 添加顶部间距
```

### 4. 应用卡片内边距调整

**修改前**：
- 应用卡片使用 `.padding(16)` 统一内边距

**修改后**：
```swift
// SavedAppCard 和 AppStatusCard
.padding(.horizontal, 16) // ✅ 水平内边距
.padding(.vertical, 12)   // ✅ 垂直内边距（减少）
.background(Color.white)
.cornerRadius(12)
.shadow(color: Color.black.opacity(0.04), radius: 4, x: 0, y: 1)
```

## 视觉效果改进

### 布局层次结构
```
应用管理界面
├── 标题栏
├── 权限/选择卡片
├── 自律时间统计卡片
└── 应用列表区域
    ├── 标题行（左右间距 16pt）
    │   ├── "应用列表"标题
    │   ├── "取消限制"按钮（如有）
    │   └── "X 个应用"计数
    ├── 应用卡片列表（无上下间距，左右间距 16pt）
    │   ├── 应用卡片 1
    │   ├── 应用卡片 2
    │   └── ...
    └── "选择应用"按钮（全宽，左右间距 16pt）
```

### 间距规范
- **左右间距**：统一使用 16pt
- **应用卡片间距**：移除上下间距（spacing: 0）
- **按钮高度**：48pt（增强可点击性）
- **卡片内边距**：水平 16pt，垂直 12pt

## 用户体验提升

1. **更好的视觉对齐**：所有元素都有统一的左右间距
2. **更紧凑的列表**：移除应用卡片间的上下间距，节省屏幕空间
3. **更突出的操作按钮**：将"选择应用"按钮移到底部，使其更显眼
4. **更大的点击区域**：增加按钮高度和宽度，提升操作便利性

## 编译状态

✅ **项目编译成功** - 所有界面修改已通过编译验证

## 技术实现要点

1. **响应式布局**：使用 `frame(maxWidth: .infinity)` 确保按钮适应不同屏幕尺寸
2. **一致的间距**：统一使用 16pt 作为标准间距值
3. **层次化 padding**：在不同层级应用 padding，避免重复间距
4. **保持原有功能**：所有交互功能保持不变，仅优化视觉布局

这些修改提升了应用管理界面的视觉效果和用户体验，使界面更加整洁、易用。

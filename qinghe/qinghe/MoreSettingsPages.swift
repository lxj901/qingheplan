import SwiftUI

// MARK: - å¹¿å‘Šä¿¡æ¯é¡µé¢
struct AdInfoView: View {
    @Environment(\.dismiss) private var dismiss
    @Binding var navigationPath: NavigationPath
    
    var body: some View {
        VStack(spacing: 0) {
            // è‡ªå®šä¹‰å¯¼èˆªæ 
            customNavigationBar
            
            ScrollView {
                VStack(alignment: .leading, spacing: 20) {
                    // å¹¿å‘Šè¯´æ˜Ž
                    VStack(alignment: .leading, spacing: 12) {
                        Text("å…³äºŽå¹¿å‘ŠæŽ¨é€")
                            .font(.system(size: 20, weight: .bold))
                        
                        Text("é’ç¦¾è®¡åˆ’é€šè¿‡å±•ç¤ºå¹¿å‘Šæ¥æ”¯æŒåº”ç”¨çš„å…è´¹ä½¿ç”¨ã€‚æˆ‘ä»¬è‡´åŠ›äºŽä¸ºæ‚¨æä¾›ç›¸å…³ä¸”æœ‰ç”¨çš„å¹¿å‘Šå†…å®¹ã€‚")
                            .font(.system(size: 16))
                            .foregroundColor(.secondary)
                    }
                    
                    // å¹¿å‘Šç±»åž‹
                    VStack(alignment: .leading, spacing: 12) {
                        Text("å¹¿å‘Šç±»åž‹")
                            .font(.system(size: 18, weight: .semibold))
                        
                        VStack(alignment: .leading, spacing: 8) {
                            Text("â€¢ æ¨ªå¹…å¹¿å‘Šï¼šæ˜¾ç¤ºåœ¨é¡µé¢é¡¶éƒ¨æˆ–åº•éƒ¨")
                            Text("â€¢ æ’å±å¹¿å‘Šï¼šåœ¨é¡µé¢åˆ‡æ¢æ—¶æ˜¾ç¤º")
                            Text("â€¢ åŽŸç”Ÿå¹¿å‘Šï¼šèžå…¥å†…å®¹æµä¸­çš„å¹¿å‘Š")
                            Text("â€¢ è§†é¢‘å¹¿å‘Šï¼šçŸ­è§†é¢‘å½¢å¼çš„å¹¿å‘Šå†…å®¹")
                        }
                        .font(.system(size: 14))
                        .foregroundColor(.secondary)
                    }
                    
                    // ä¸ªæ€§åŒ–è®¾ç½®
                    VStack(alignment: .leading, spacing: 12) {
                        Text("ä¸ªæ€§åŒ–è®¾ç½®")
                            .font(.system(size: 18, weight: .semibold))
                        
                        Text("é’ç¦¾è®¡åˆ’ä¼šæ ¹æ®æ‚¨çš„å…´è¶£å’Œä½¿ç”¨ä¹ æƒ¯å±•ç¤ºç›¸å…³å†…å®¹å’Œå¹¿å‘Šã€‚")
                            .font(.system(size: 14))
                            .foregroundColor(.secondary)
                    }
                    
                    // è”ç³»æ–¹å¼
                    VStack(alignment: .leading, spacing: 12) {
                        Text("æ„è§åé¦ˆ")
                            .font(.system(size: 18, weight: .semibold))
                        
                        Text("å¦‚æžœæ‚¨å¯¹å¹¿å‘Šå†…å®¹æœ‰ä»»ä½•æ„è§æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡\"åé¦ˆä¸Žå¸®åŠ©\"è”ç³»æˆ‘ä»¬ã€‚")
                            .font(.system(size: 14))
                            .foregroundColor(.secondary)
                    }
                }
                .padding(.horizontal, 20)
                .padding(.top, 20)
            }
        }
        .onAppear {
            print("ðŸ§­ AdInfoView onAppear - navigationPath.count = \(navigationPath.count)")
        }
    }
    
    // MARK: - è‡ªå®šä¹‰å¯¼èˆªæ 
    private var customNavigationBar: some View {
        HStack {
            Button(action: {
                if navigationPath.count > 0 {
                    navigationPath.removeLast()
                } else {
                    dismiss()
                }
            }) {
                Image(systemName: "chevron.left")
                    .font(.system(size: 20, weight: .medium))
                    .foregroundColor(.primary)
                    .frame(width: 44, height: 44)
            }
            
            Spacer()
            
            Text("äº†è§£å¹¿å‘ŠæŽ¨é€")
                .font(.headline)
                .fontWeight(.semibold)
            
            Spacer()
            
            Color.clear.frame(width: 44, height: 44)
        }
        .padding(.horizontal, 16)
        .padding(.vertical, 8)
        .background(Color(.systemBackground))
    }
}

// MARK: - åé¦ˆä¸Žå¸®åŠ©é¡µé¢
struct FeedbackHelpView: View {
    @Environment(\.dismiss) private var dismiss
    @Binding var navigationPath: NavigationPath
    @State private var feedbackText = ""
    @State private var selectedCategory = "åŠŸèƒ½å»ºè®®"
    @State private var contactEmail = ""
    @State private var showingSubmitAlert = false
    
    private let categories = ["åŠŸèƒ½å»ºè®®", "é—®é¢˜åé¦ˆ", "ä½¿ç”¨å’¨è¯¢", "å…¶ä»–"]
    
    var body: some View {
        VStack(spacing: 0) {
            // è‡ªå®šä¹‰å¯¼èˆªæ 
            customNavigationBar
            
            List {
                // åé¦ˆç±»åž‹
                Section("åé¦ˆç±»åž‹") {
                    Picker("ç±»åž‹", selection: $selectedCategory) {
                        ForEach(categories, id: \.self) { category in
                            Text(category).tag(category)
                        }
                    }
                    .pickerStyle(MenuPickerStyle())
                }
                
                // åé¦ˆå†…å®¹
                Section("åé¦ˆå†…å®¹") {
                    VStack(alignment: .leading, spacing: 8) {
                        Text("è¯·è¯¦ç»†æè¿°æ‚¨çš„é—®é¢˜æˆ–å»ºè®®")
                            .font(.system(size: 14))
                            .foregroundColor(.secondary)
                        
                        TextEditor(text: $feedbackText)
                            .frame(minHeight: 100)
                            .overlay(
                                RoundedRectangle(cornerRadius: 8)
                                    .stroke(Color.gray.opacity(0.3), lineWidth: 1)
                            )
                    }
                    .padding(.vertical, 4)
                }
                
                // è”ç³»æ–¹å¼
                Section("è”ç³»æ–¹å¼ï¼ˆå¯é€‰ï¼‰") {
                    TextField("æ‚¨çš„é‚®ç®±", text: $contactEmail)
                        .keyboardType(.emailAddress)
                        .autocapitalization(.none)
                }
                
                // æäº¤æŒ‰é’®
                Section {
                    Button(action: {
                        submitFeedback()
                    }) {
                        HStack {
                            Spacer()
                            Text("æäº¤åé¦ˆ")
                                .font(.system(size: 16, weight: .medium))
                                .foregroundColor(.white)
                            Spacer()
                        }
                        .padding(.vertical, 12)
                        .background(feedbackText.isEmpty ? Color.gray : Color.blue)
                        .cornerRadius(8)
                    }
                    .disabled(feedbackText.isEmpty)
                    .buttonStyle(PlainButtonStyle())
                }
                
                // å¸¸è§é—®é¢˜
                Section("å¸¸è§é—®é¢˜") {
                    ForEach(FAQItem.allCases, id: \.self) { faq in
                        VStack(alignment: .leading, spacing: 8) {
                            Text(faq.question)
                                .font(.system(size: 16, weight: .medium))
                            
                            Text(faq.answer)
                                .font(.system(size: 14))
                                .foregroundColor(.secondary)
                        }
                        .padding(.vertical, 4)
                    }
                }
            }
        }
        .alert("åé¦ˆå·²æäº¤", isPresented: $showingSubmitAlert) {
            Button("ç¡®å®š", role: .cancel) { }
        } message: {
            Text("æ„Ÿè°¢æ‚¨çš„åé¦ˆï¼Œæˆ‘ä»¬ä¼šè®¤çœŸå¤„ç†æ‚¨çš„å»ºè®®")
        }
        .onAppear {
            print("ðŸ§­ FeedbackHelpView onAppear - navigationPath.count = \(navigationPath.count)")
        }
    }
    
    // MARK: - è‡ªå®šä¹‰å¯¼èˆªæ 
    private var customNavigationBar: some View {
        HStack {
            Button(action: {
                if navigationPath.count > 0 {
                    navigationPath.removeLast()
                } else {
                    dismiss()
                }
            }) {
                Image(systemName: "chevron.left")
                    .font(.system(size: 20, weight: .medium))
                    .foregroundColor(.primary)
                    .frame(width: 44, height: 44)
            }
            
            Spacer()
            
            Text("åé¦ˆä¸Žå¸®åŠ©")
                .font(.headline)
                .fontWeight(.semibold)
            
            Spacer()
            
            Color.clear.frame(width: 44, height: 44)
        }
        .padding(.horizontal, 16)
        .padding(.vertical, 8)
        .background(Color(.systemBackground))
    }
    
    // MARK: - æäº¤åé¦ˆ
    private func submitFeedback() {
        // è¿™é‡Œå¯ä»¥æ·»åŠ å®žé™…çš„åé¦ˆæäº¤é€»è¾‘
        print("ðŸ“ æäº¤åé¦ˆ: \(selectedCategory) - \(feedbackText)")
        showingSubmitAlert = true
        
        // æ¸…ç©ºè¡¨å•
        feedbackText = ""
        contactEmail = ""
        selectedCategory = "åŠŸèƒ½å»ºè®®"
    }
}

// MARK: - å¸¸è§é—®é¢˜æžšä¸¾
enum FAQItem: CaseIterable {
    case login
    case notification
    case privacy
    case account
    
    var question: String {
        switch self {
        case .login: return "å¦‚ä½•ç™»å½•è´¦å·ï¼Ÿ"
        case .notification: return "ä¸ºä»€ä¹ˆæ”¶ä¸åˆ°é€šçŸ¥ï¼Ÿ"
        case .privacy: return "å¦‚ä½•ä¿æŠ¤éšç§ï¼Ÿ"
        case .account: return "å¦‚ä½•æ³¨é”€è´¦å·ï¼Ÿ"
        }
    }
    
    var answer: String {
        switch self {
        case .login: return "æ‚¨å¯ä»¥ä½¿ç”¨æ‰‹æœºå·ç ç™»å½•ï¼Œé¦–æ¬¡ä½¿ç”¨ä¼šè‡ªåŠ¨æ³¨å†Œè´¦å·ã€‚"
        case .notification: return "è¯·æ£€æŸ¥ç³»ç»Ÿè®¾ç½®ä¸­çš„é€šçŸ¥æƒé™ï¼Œç¡®ä¿å·²å…è®¸é’ç¦¾è®¡åˆ’å‘é€é€šçŸ¥ã€‚"
        case .privacy: return "æˆ‘ä»¬ä¸¥æ ¼ä¿æŠ¤ç”¨æˆ·éšç§ï¼Œæ‚¨å¯ä»¥åœ¨éšç§è®¾ç½®ä¸­ç®¡ç†ä¸ªäººä¿¡æ¯ã€‚"
        case .account: return "åœ¨è®¾ç½®-è´¦å·ä¸Žå®‰å…¨ä¸­å¯ä»¥æ‰¾åˆ°æ³¨é”€è´¦å·é€‰é¡¹ã€‚"
        }
    }
}

// MARK: - ç¤¾åŒºå…¬çº¦é¡µé¢
struct CommunityConventionView: View {
    @Environment(\.dismiss) private var dismiss
    @Binding var navigationPath: NavigationPath
    
    // ç¤¾åŒºå…¬çº¦ Markdown å†…å®¹
    private let conventionMarkdown = """
## ç¤¾åŒºå…¬çº¦

æœ€åŽæ›´æ–°ï¼š2025-10-14

æœ¬å…¬çº¦æ—¨åœ¨ä¸ºæ‰€æœ‰æˆå‘˜è¥é€ å®‰å…¨ã€å‹å–„ã€çœŸå®žã€äº’åŠ©çš„ç¤¾åŒºçŽ¯å¢ƒã€‚ä½¿ç”¨æœ¬äº§å“å¹¶å‚ä¸Žç¤¾åŒºæ´»åŠ¨ï¼Œå³è¡¨ç¤ºä½ åŒæ„éµå®ˆæœ¬å…¬çº¦åŠç›¸å…³æ³•å¾‹æ³•è§„ã€‚

## é€‚ç”¨èŒƒå›´

- **é€‚ç”¨å¯¹è±¡**ï¼šåœ¨ç¤¾åŒºå†…å‘å¸ƒã€æµè§ˆã€è¯„è®ºã€ç§ä¿¡ã€å‚ä¸Žæ´»åŠ¨çš„æ‰€æœ‰ç”¨æˆ·ä¸Žç»„ç»‡ã€‚
- **é€‚ç”¨å†…å®¹**ï¼šå¸–å­ã€è¯„è®ºã€ç§ä¿¡ã€æ˜µç§°ä¸Žå¤´åƒã€ç­¾åã€è¯é¢˜æ ‡ç­¾ã€å›¾ç‰‡/éŸ³è§†é¢‘ã€é“¾æŽ¥åŠå…¶ä»–ç”¨æˆ·ç”Ÿæˆå†…å®¹ï¼ˆUGCï¼‰ã€‚

## æ ¸å¿ƒä»·å€¼

- **å°Šé‡**ï¼šå°Šé‡æ¯ä¸€ä½ç”¨æˆ·çš„å°Šä¸¥ã€æ–‡åŒ–ä¸Žå·®å¼‚ã€‚
- **å®‰å…¨**ï¼šæ‹’ç»æš´åŠ›ã€éªšæ‰°ã€å¨èƒä¸Žå±é™©è¡Œä¸ºï¼Œä¿æŠ¤æœªæˆå¹´äººã€‚
- **çœŸå®ž**ï¼šä¸é€ è°£ã€ä¸ä¼ è°£ï¼Œåå¯¹è¯¯å¯¼æ€§ä¿¡æ¯ä¸Žè™šå‡å®£ä¼ ã€‚
- **éšç§**ï¼šå°Šé‡å¹¶ä¿æŠ¤ä¸ªäººéšç§ä¸Žæ•°æ®å®‰å…¨ã€‚
- **é«˜è´¨**ï¼šé¼“åŠ±æœ‰ç›Šã€ä¸“ä¸šã€å¯éªŒè¯çš„å†…å®¹åˆ†äº«ä¸Žç†æ€§è®¨è®ºã€‚

## è¡Œä¸ºå‡†åˆ™

- **å‹å–„äº¤æµ**ï¼šä½¿ç”¨æ–‡æ˜Žã€å…‹åˆ¶çš„è¡¨è¾¾æ–¹å¼ï¼Œèšç„¦è§‚ç‚¹è€Œéžäººèº«æ”»å‡»ã€‚
- **å®ˆæ³•åˆè§„**ï¼šä¸å¾—å‘å¸ƒæˆ–ç»„ç»‡è¿æ³•è¿è§„å†…å®¹ä¸Žæ´»åŠ¨ã€‚
- **å°Šé‡éšç§**ï¼šä¸å¾—å…¬å¼€ä»–äººä¸ªäººä¿¡æ¯ï¼ˆå¦‚çœŸå®žå§“åã€è”ç³»æ–¹å¼ã€ä½å€ã€å·¥ä½œå•ä½ç­‰ï¼‰ã€‚
- **å¦‚å®žæ ‡æ³¨**ï¼šè½¬è½½éœ€æ³¨æ˜Žæ¥æºï¼Œå¼•ç”¨éœ€å‡†ç¡®æ ‡æ³¨ï¼Œé¿å…æ–­ç« å–ä¹‰ã€‚
- **é€‚é¾„ä½¿ç”¨**ï¼šæœªæˆå¹´äººéœ€åœ¨ç›‘æŠ¤æŒ‡å¯¼ä¸‹ä½¿ç”¨ï¼Œæ¶‰åŠæœªæˆå¹´äººçš„å†…å®¹éœ€ç‰¹åˆ«å®¡æ…Žã€‚

## ç¦æ­¢å†…å®¹ä¸Žè¡Œä¸º

- **ä»‡æ¨ä¸Žæ­§è§†**ï¼šåŸºäºŽç§æ—ã€æ°‘æ—ã€æ€§åˆ«ã€æ€§å–å‘ã€å®—æ•™ã€æ®‹éšœã€ç–¾ç—…ç­‰çš„ä»‡æ¨è¨€è®ºã€æ±¡ååŒ–ä¸Žç…½åŠ¨æŽ’æ–¥ã€‚
- **éªšæ‰°ä¸Žéœ¸å‡Œ**ï¼šè·Ÿè¸ªã€æå“ã€è¾±éª‚ã€äººè‚‰æœç´¢ã€ç¾¤ä½“å›´æ”»ã€æ€§éªšæ‰°ä¸Žä»»ä½•å½¢å¼çš„æŒç»­æ€§éªšæ‰°ã€‚
- **è‰²æƒ…ä¸Žæœªæˆå¹´äºº**ï¼šéœ²éª¨è‰²æƒ…ã€æ€§æš—ç¤ºã€æ€§æœåŠ¡æ‹›æ½ï¼Œå°¤å…¶ä¸¥ç¦æ¶‰åŠæœªæˆå¹´äººçš„ä»»ä½•æ€§ç›¸å…³å†…å®¹ã€‚
- **æš´åŠ›ä¸Žè¡€è…¥**ï¼šé¼“å¹æš´åŠ›ã€å¨èƒä»–äººã€äººèº«ä¼¤å®³æ•™ç¨‹ï¼Œä¼ æ’­æžåº¦è¡€è…¥ç”»é¢ï¼ˆéžç§‘æ™®/æ–°é—»å¿…è¦æƒ…å¢ƒï¼‰ã€‚
- **è¿æ³•ä¸Žå±é™©è¡Œä¸º**ï¼šæ¯’å“ã€èµŒåšã€æ­¦å™¨ã€çˆ†ç‚¸ç‰©ã€è¯ˆéª—ã€ä¼ é”€ã€é»‘ç°äº§ã€æŒ‡å¯¼è‡ªæ®‹/è‡ªæ€ç­‰å†…å®¹ä¸Žè¡Œä¸ºã€‚
- **é”™è¯¯ä¿¡æ¯ä¸Žä¼ªç§‘å­¦**ï¼šç»åå¤è¯ä¼ªçš„è™šå‡ä¿¡æ¯ã€åŒ»ç–—ä¸Žå¥åº·è¯¯å¯¼ã€å±å®³å…¬å…±å®‰å…¨çš„è°£è¨€ã€‚
- **ä¾µçŠ¯çŸ¥è¯†äº§æƒ**ï¼šæœªç»æŽˆæƒçš„ç›—ç‰ˆã€ä¾µæƒè½¬è½½ã€ä¾µå ç½²åã€æœªç»è®¸å¯çš„æ¨¡åž‹/ç´ æ/ä»£ç åˆ†å‘ã€‚
- **åžƒåœ¾ä¿¡æ¯ä¸Žåˆ·é‡**ï¼šé‡å¤å‘å¸ƒã€æ ‡é¢˜å…šã€å¼•æµåˆ·å±ã€è™šå‡äº’åŠ¨ã€æ¶æ„åˆ·èµž/åˆ·è¯„/åˆ·ç²‰ã€‚
- **éšç§æ•°æ®æ»¥ç”¨**ï¼šæ”¶é›†ã€ä¹°å–ã€ä¼ æ’­ä»–äººä¸ªäººæ•æ„Ÿä¿¡æ¯æˆ–è´¦å·æ•°æ®ã€‚
- **ä¸å½“å¹¿å‘Š**ï¼šå¤¸å¤§æˆ–è™šå‡å®£ä¼ ã€è¿è§„å¯¼æµã€è¯±å¯¼ä»˜è´¹ã€ä¼ é”€ä¸Žå˜ç›¸é›†èµ„ã€‚

## å†…å®¹å‘å¸ƒä¸Žäº’åŠ¨è§„èŒƒ

- **æ ‡é¢˜ä¸Žæ ‡ç­¾**ï¼šå‡†ç¡®åæ˜ å†…å®¹ï¼Œä¸è¯¯å¯¼ï¼›åˆç†ä½¿ç”¨æ ‡ç­¾ï¼Œé¿å…è¹­çƒ­ç‚¹ä¸Žæ— å…³è¯é¢˜ã€‚
- **åª’ä½“åˆè§„**ï¼šä¸Šä¼ çš„å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘éœ€ç¡®ä¿åˆæ³•ã€æ¥æºå¯ç”¨ã€äººç‰©æŽˆæƒæ˜Žç¡®ã€‚
- **è¯„è®ºä¸Žç§ä¿¡**ï¼šç†æ€§è®¨è®ºã€æ®ç†åŠ›äº‰ï¼Œä¸æ¶è¯„å¼•æˆ˜ï¼›ç§ä¿¡ä¸å¾—éªšæ‰°æŽ¨é”€ã€‚
- **æ•æ„Ÿè®®é¢˜**ï¼šåœ¨åŒ»ç–—ã€å¿ƒç†ã€æ³•å¾‹ç­‰ä¸“ä¸šä¸»é¢˜ä¸‹ï¼Œé¡»æ˜Žç¡®å£°æ˜Žéžä¸“ä¸šå»ºè®®ï¼Œä¸æ›¿ä»£è¯Šç–—æˆ–æ³•å¾‹æ„è§ã€‚

## è´¦å·ä¸Žèº«ä»½

- **è´¦å·å®‰å…¨**ï¼šå¦¥å–„ä¿ç®¡å¯†ç ä¸Žè®¾å¤‡ï¼›å‘çŽ°å¼‚å¸¸åŠæ—¶åé¦ˆã€‚
- **å†’å……ä¸Žä¼ªé€ **ï¼šç¦æ­¢å†’å……ä»–äººæˆ–æœºæž„ï¼›å®˜æ–¹è´¦å·é¡»å®Œæˆè®¤è¯å¹¶æ˜Žç¡®æ ‡è¯†ã€‚
- **å¤šè´¦å·ä½¿ç”¨**ï¼šç¦æ­¢åˆ©ç”¨å¤šä¸ªè´¦å·è¿›è¡Œæ“çºµèˆ†è®ºã€è§„é¿å¤„ç½šæˆ–ç‰Ÿåˆ©ã€‚

## ä¸¾æŠ¥ä¸Žç”³è¯‰

- **ä¸¾æŠ¥æ¸ é“**ï¼šåœ¨å†…å®¹é¡µã€ä¸ªäººä¸»é¡µæˆ–ç§ä¿¡å¯¹è¯ä¸­ä½¿ç”¨"ä¸¾æŠ¥"å…¥å£ï¼Œé€‰æ‹©åˆé€‚çš„ä¸¾æŠ¥ç†ç”±å¹¶è¡¥å……è¯æ®ã€‚
- **å¤„ç†æœºåˆ¶**ï¼šå¹³å°å°†ä¾æ®äº‹å®žä¸Žè§„åˆ™è¿›è¡Œå®¡æ ¸ï¼Œå¿…è¦æ—¶ç»“åˆäººå·¥ä¸Žç®—æ³•æ‰‹æ®µã€‚
- **ç”³è¯‰è·¯å¾„**ï¼šå¦‚å¯¹å¤„ç†ç»“æžœæœ‰å¼‚è®®ï¼Œå¯åœ¨é€šçŸ¥é¡µä¸­æäº¤ç”³è¯‰ï¼›é€šå¸¸äºŽ7ä¸ªè‡ªç„¶æ—¥å†…ç»™å‡ºåé¦ˆï¼ˆå¤æ‚æƒ…å½¢å¯èƒ½é€‚åº¦å»¶é•¿ï¼‰ã€‚

## è¿è§„å¤„ç½®æ¢¯åº¦

- **å†…å®¹å¤„ç½®**ï¼šåˆ é™¤ã€ä¸‹æž¶ã€é™æµã€æ‰“æ ‡ã€é™åˆ¶æŽ¨èã€å±è”½è¯é¢˜ç­‰ã€‚
- **åŠŸèƒ½é™åˆ¶**ï¼šç¦è¨€ã€é™åˆ¶å‘å¸ƒ/è¯„è®º/ç§ä¿¡ã€é™åˆ¶åˆ›å»ºæˆ–åŠ å…¥ç¾¤ç»„ç­‰ã€‚
- **è´¦å·å¤„ç½š**ï¼šè­¦å‘Šã€é˜¶æ®µæ€§å°ç¦ã€æ°¸ä¹…å°ç¦ï¼›æ¶‰å«Œè¿æ³•çš„å°†é…åˆä¾æ³•å¤„ç†ã€‚
- **è¿žå¸¦æ²»ç†**ï¼šå¯¹ç»„ç»‡åŒ–ã€äº§ä¸šåŒ–è¿è§„ï¼ˆå«å¤šè´¦å·è”åŠ¨ï¼‰å°†ä»Žä¸¥ä»Žé‡ã€‚

## æœªæˆå¹´äººä¿æŠ¤

- **å¹´é¾„é€‚é…**ï¼šä¸Žæœªæˆå¹´äººç›¸å…³çš„å†…å®¹éœ€å¥åº·ã€é€‚é¾„ï¼Œé¿å…ä¸å½“å¼•å¯¼ã€‚
- **ç›‘æŠ¤æŒ‡å¼•**ï¼šé¼“åŠ±ç›‘æŠ¤äººå…³æ³¨æœªæˆå¹´äººä½¿ç”¨æƒ…å†µï¼Œå¿…è¦æ—¶è®¾ç½®ä½¿ç”¨æ—¶é•¿ä¸Žæƒé™é™åˆ¶ã€‚
- **æ±‚åŠ©é€šé“**ï¼šæ¶‰åŠè‡ªä¼¤è‡ªæ€ç­‰é«˜é£Žé™©å†…å®¹ï¼Œä¼˜å…ˆå¼•å¯¼è‡³ä¸“ä¸šæœºæž„ä¸Žç´§æ€¥æ±‚åŠ©æ¸ é“ï¼›ç¦æ­¢é¼“åŠ±æˆ–æŒ‡å¯¼å±é™©è¡Œä¸ºã€‚

## é€æ˜Žåº¦ä¸Žæ²»ç†

- **å®¡æ ¸åŽŸåˆ™**ï¼šéµå¾ª"åˆæ³•åˆè§„ã€æœ€å°å¿…è¦ã€å…ˆäººèº«å®‰å…¨"çš„åŽŸåˆ™ï¼Œå…¼é¡¾è¡¨è¾¾è‡ªç”±ä¸Žå…¬å…±åˆ©ç›Šã€‚
- **é€æ˜ŽæŠ«éœ²**ï¼šå°†é€‚æ—¶å‘å¸ƒç¤¾åŒºæ²»ç†ä¸Žé€æ˜Žåº¦æŠ¥å‘Šï¼ˆå¦‚å…¸åž‹æ¡ˆä¾‹ã€è¿è§„ç»Ÿè®¡ã€å¤„ç½®æ•°æ®ç­‰ï¼‰ã€‚

## çŸ¥è¯†äº§æƒä¸Žè®¸å¯

- **åŽŸåˆ›ä¸ŽæŽˆæƒ**ï¼šå‘å¸ƒå†…å®¹é»˜è®¤è§†ä¸ºç”±å‘å¸ƒè€…äº«æœ‰ç›¸åº”æƒåˆ©æˆ–å·²èŽ·å¾—åˆæ³•æŽˆæƒï¼›è¯·ç¡®ä¿ä¸ä¾µæƒã€‚
- **å¼•ç”¨è§„èŒƒ**ï¼šå¼•ç”¨ä»–äººä½œå“é¡»åœ¨åˆç†ä½¿ç”¨èŒƒå›´å†…ï¼Œå¹¶æ˜Žç¡®æ ‡æ³¨æ¥æºä¸Žä½œè€…ï¼›é¿å…å¤§æ®µæ¬è¿ã€‚
- **ç‰ˆæƒæŠ•è¯‰**ï¼šæƒåˆ©äººå¯é€šè¿‡"ä¾µæƒæŠ•è¯‰"æ¸ é“æäº¤æƒå±žè¯æ˜Žä¸Žå–è¯ææ–™ï¼›å¹³å°å°†åœ¨åˆç†æ—¶é—´å†…å¤„ç†ï¼ˆé€šå¸¸3-7ä¸ªå·¥ä½œæ—¥ï¼‰ã€‚
- **å¼€æºä¸Žç´ æ**ï¼šä½¿ç”¨å¼€æºä»£ç ã€æ¨¡åž‹ã€å­—ä½“ã€å›¾ç‰‡ã€éŸ³è§†é¢‘ç´ ææ—¶ï¼Œéœ€éµå®ˆå…¶è®¸å¯è¯ï¼ˆå¦‚ MITã€Apache-2.0ã€CC BY-NC ç­‰ï¼‰ã€‚

## AI ç”Ÿæˆå†…å®¹ï¼ˆAIGCï¼‰ä¸Žåˆæˆåª’ä½“

- **æ ‡æ³¨è¦æ±‚**ï¼šä½¿ç”¨ AI/åˆæˆæŠ€æœ¯ç”Ÿæˆçš„å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ã€æ–‡æœ¬ï¼Œåº”åœ¨å‘å¸ƒæ—¶æ¸…æ™°æ ‡æ³¨"AI ç”Ÿæˆ/åˆæˆ"ã€‚
- **æ·±åº¦ä¼ªé€ é™åˆ¶**ï¼šç¦æ­¢æœªç»æŽˆæƒçš„æ¢è„¸ã€æ‹Ÿå£°ã€åˆæˆå½¢è±¡ä¾µçŠ¯ä»–äººè‚–åƒæƒä¸Žåèª‰æƒï¼Œå°¤å…¶æ¶‰åŠæœªæˆå¹´äººæˆ–æ•æ„Ÿäººç‰©ã€‚
- **è¯¯å¯¼ä¸Žé£Žé™©**ï¼šä¸å¾—åˆ©ç”¨ AIGC åˆ¶ä½œè¶³ä»¥è¯¯å¯¼å…¬ä¼—çš„"ä»¿æ–°é—»/ä»¿å…¬å‘Š/ä»¿è­¦ç¤º"å†…å®¹ã€‚

## åŒ»ç–—ã€å¿ƒç†ä¸Žå¥åº·ä¿¡æ¯

- **éžä¸“ä¸šå£°æ˜Ž**ï¼šæ¶‰åŠåŒ»ç–—ä¸Žå¿ƒç†å¥åº·çš„åˆ†äº«åº”æ˜Žç¡®"éžåŒ»ç–—å»ºè®®"ï¼Œä¸æ›¿ä»£ä¸“ä¸šè¯Šç–—ã€‚
- **å¯ä¿¡æ¥æº**ï¼šå¥åº·ç›¸å…³å†…å®¹åº”å°½é‡å¼•ç”¨æƒå¨æ¥æºæˆ–å…±è¯†æŒ‡å—ï¼Œå¹¶é¿å…å¤¸å¤§ç–—æ•ˆæˆ–åˆ¶é€ ææ…Œã€‚
- **å±é™©æŒ‡å¼•ç¦æ­¢**ï¼šç¦æ­¢ä¼ æ’­ä¸å…·å¤‡ç§‘å­¦ä¾æ®ä¸”å¯èƒ½å±å®³èº«ä½“æˆ–å¿ƒç†å¥åº·çš„åæ–¹ã€æžç«¯å‡è‚¥/å¢žè‚Œæ–¹æ³•ã€å±é™©æŒ‘æˆ˜ç­‰ã€‚

## è¯¯å¯¼æ€§ä¿¡æ¯ä¸Žäº‹å®žæ ¸æŸ¥

- **å¯¹å…¬å…±å®‰å…¨çš„è¯¯å¯¼**ï¼šæ¶‰åŠè‡ªç„¶ç¾å®³ã€å…¬å…±å«ç”Ÿã€ç¤¾ä¼šå®‰å…¨ç­‰é‡è¦ä¿¡æ¯æ—¶ï¼Œç¦æ­¢ä¼ æ’­ç»è¯ä¼ªçš„è°£è¨€ã€‚
- **æ›´æ­£æœºåˆ¶**ï¼šä¸€æ—¦è¢«è¯å®žä¸ºä¸å®žä¿¡æ¯ï¼Œå‘å¸ƒè€…åº”åŠæ—¶æ›´æ­£æˆ–åˆ é™¤ï¼›å¹³å°å¯åŠ æ³¨é£Žé™©æç¤ºæˆ–é™åˆ¶ä¼ æ’­ã€‚
- **äº‹å®žæ ¸æŸ¥åˆä½œ**ï¼šå¹³å°å¯ä¸Žç¬¬ä¸‰æ–¹äº‹å®žæ ¸æŸ¥æœºæž„åˆä½œï¼Œå¯¹äº‰è®®å†…å®¹è¿›è¡Œè¯„ä¼°ä¸Žæç¤ºã€‚

## å•†ä¸šåŒ–ã€å¹¿å‘Šä¸Žå¼•æµ

- **å…è®¸çš„å•†ä¸šåŒ–**ï¼šå¦‚ç»éªŒåˆ†äº«ã€è¯„æµ‹ã€å¸¦è´§é¡»å¦‚å®žæŠ«éœ²"å•†ä¸šåˆä½œ/èµžåŠ©/å¹¿å‘Š/å«æŽ¨å¹¿é“¾æŽ¥"ã€‚
- **ç¦æ­¢è¡Œä¸º**ï¼šè™šå‡å®£ä¼ ã€å‡å†’å®˜æ–¹ã€è¿è§„é‡‘èž/åšå½©/ä¼ é”€ã€é»‘äº§å¼•æµã€æ‹‰ç¾¤æ”¶è´¹ã€å˜ç›¸é›†èµ„ã€‚
- **å¤–é“¾ä¸Žå¯¼æµ**ï¼šå¤–é“¾éœ€å®‰å…¨åˆè§„ï¼Œä¸å¾—è·³è½¬è‡³è¿è§„ç«™ç‚¹æˆ–éšæ€§æ”¶è´¹é¡µé¢ã€‚

## æ•°æ®ä¸Žéšç§ä¿æŠ¤

- **æœ€å°å¿…è¦**ï¼šæ”¶é›†ä¸Žå±•ç¤ºçš„ä¸ªäººä¿¡æ¯åº”ä»¥æœ€å°å¿…è¦ä¸ºåŽŸåˆ™ï¼›æ•æ„Ÿä¿¡æ¯é»˜è®¤ä¸å±•ç¤ºã€‚
- **å…¬å¼€èŒƒå›´**ï¼šå‘å¸ƒå†…å®¹å—é™äºŽå‘å¸ƒæ—¶é€‰æ‹©çš„å¯è§èŒƒå›´ï¼›è¯·è°¨æ…Žåœ¨å…¬å…±åŒºåŸŸæŠ«éœ²ä¸ªäººéšç§ã€‚
- **ç¬¬ä¸‰æ–¹æœåŠ¡**ï¼šæŽ¥å…¥ç¬¬ä¸‰æ–¹ç»Ÿè®¡ã€æŽ¨é€ã€å¹¿å‘ŠæœåŠ¡æ—¶ï¼Œå°†åœ¨éšç§æ”¿ç­–ä¸­æ˜Žç¤ºç”¨é€”ä¸ŽèŒƒå›´ã€‚
- **ç”¨æˆ·æƒåˆ©**ï¼šåœ¨æ³•å¾‹å…è®¸èŒƒå›´å†…ï¼Œç”¨æˆ·å¯ç”³è¯·è®¿é—®ã€æ›´æ­£ä¸Žåˆ é™¤ä¸ªäººæ•°æ®ï¼›å¯ç”³è¯·æ³¨é”€è´¦æˆ·ã€‚

## è‡ªåŠ¨åŒ–ä¸Žåæ»¥ç”¨

- **è‡ªåŠ¨åŒ–é™åˆ¶**ï¼šç¦æ­¢æœªç»æŽˆæƒçš„çˆ¬è™«ã€æ‰¹é‡æ³¨å†Œã€è‡ªåŠ¨å‘è¯„ã€æ‰¹é‡æ¶ˆæ¯ç­‰è¡Œä¸ºã€‚
- **æŠ€æœ¯å¯¹æŠ—**ï¼šå¹³å°å°†ä½¿ç”¨é£ŽæŽ§ä¸Žåæ»¥ç”¨æœºåˆ¶ï¼ˆå¦‚è®¾å¤‡æŒ‡çº¹ã€é€ŸçŽ‡é™åˆ¶ã€è¡Œä¸ºå»ºæ¨¡ï¼‰é˜²æ­¢åˆ·é‡ä¸Žæ“çºµã€‚
- **å®‰å…¨æµ‹è¯•**ï¼šå®‰å…¨ç ”ç©¶éœ€å…ˆè¡Œå–å¾—è®¸å¯ï¼Œç¦æ­¢å¯¹å¹³å°è¿›è¡ŒæœªæŽˆæƒæµ‹è¯•ä¸Žæ”»å‡»ã€‚

## æ•æ„Ÿå†…å®¹åˆ†çº§ä¸Žæ ‡æ³¨

- **å†…å®¹åˆ†çº§**ï¼šå¯¹å¯èƒ½å¼•èµ·ä¸é€‚çš„å†…å®¹ï¼ˆå¦‚è½»åº¦è¡€è…¥ã€åŒ»ç–—æ“ä½œã€æ˜†è™«ææƒ§è¯±å› ï¼‰åº”åŠ æ³¨æé†’å¹¶éšè—ç¼©ç•¥å›¾ã€‚
- **å¹´é¾„é—¨æ§›**ï¼šæ¶‰åŠæˆå¹´ä¸»é¢˜çš„è®¨è®ºéœ€åœ¨è§„åˆ™å…è®¸çš„å‰æä¸‹è¿›è¡Œå¹´é¾„é—¨æ§›æŽ§åˆ¶ï¼Œä¸¥ç¦æ¶‰æœªæˆå¹´äººä¸å½“å†…å®¹ã€‚

## çº¿ä¸‹æ´»åŠ¨ä¸Žå®‰å…¨

- **æ´»åŠ¨ç»„ç»‡**ï¼šç»„ç»‡æˆ–å‚ä¸Žçº¿ä¸‹æ´»åŠ¨æ—¶ï¼Œåº”éµå®ˆå½“åœ°æ³•å¾‹å’Œå®‰å…¨è§„èŒƒï¼Œæ˜Žç¡®é£Žé™©ä¸Žè´£ä»»åˆ’åˆ†ã€‚
- **ä¸ªäººå®‰å…¨**ï¼šé¿å…åœ¨å…¬å…±å¸–å­ä¸­æŠ«éœ²èšä¼šçš„è¯¦ç»†æ—¶é—´ä¸Žç²¾ç¡®åœ°ç‚¹ï¼›è°¨é˜²è¯ˆéª—ä¸Žäººèº«é£Žé™©ã€‚

## å¯è®¿é—®æ€§ä¸ŽåŒ…å®¹æ€§

- **æ— éšœç¢ä¼˜å…ˆ**ï¼šé¼“åŠ±ä¸ºå›¾ç‰‡æ·»åŠ æ›¿ä»£æ–‡æœ¬ã€ä¸ºè§†é¢‘æ·»åŠ å­—å¹•ï¼Œæå‡ä¿¡æ¯å¯è¾¾æ€§ã€‚
- **åŒ…å®¹ç”¨è¯­**ï¼šé¿å…ä½¿ç”¨å¸¦æœ‰åè§æˆ–æ­§è§†è‰²å½©çš„è¯æ±‡ï¼Œå°Šé‡å¤šå…ƒèº«ä»½ä¸Žè¡¨è¾¾ã€‚

## ç¤¾åŒºè§’è‰²ä¸Žæ²»ç†

- **è§’è‰²è¯´æ˜Ž**ï¼šç«™æ–¹ç®¡ç†å‘˜ã€ç¤¾åŒºç‰ˆä¸»ä¸Žå†…å®¹å®¡æ ¸å‘˜éœ€éµå®ˆæ›´é«˜æ ‡å‡†çš„è¡Œä¸ºå‡†åˆ™ä¸Žå›žé¿åˆ¶åº¦ã€‚
- **åˆ©ç›Šå†²çª**ï¼šæ¶‰åŠä¸ªäººå•†ä¸šåˆ©ç›Šã€äº²å‹å…³ç³»æˆ–å¯¹ç«žå“çš„æ‰¹è¯„ï¼Œåº”ä¸»åŠ¨æŠ«éœ²åˆ©ç›Šå…³ç³»ã€‚
- **é€æ˜Žè®°å½•**ï¼šå¯¹é‡è¦æ²»ç†å†³ç­–ï¼ˆå¦‚å¤§è§„æ¨¡è¯é¢˜ç®¡æŽ§ï¼‰å°†å°½å¯èƒ½å…¬å¼€èƒŒæ™¯ä¸Žä¾æ®ã€‚

## å¤„ç½®ä¸Žç”³è¯‰çš„æ—¶æ•ˆä¸Žè®°å½•

- **å¤„ç½®æ—¶æ•ˆ**ï¼šç´§æ€¥å¨èƒç±»å†…å®¹åŠ›äº‰å³æ—¶å¤„ç½®ï¼›ä¸€èˆ¬è¿è§„é€šå¸¸äºŽ1-3ä¸ªå·¥ä½œæ—¥å†…å¤„ç†ã€‚
- **ç”³è¯‰æ—¶æ•ˆ**ï¼šç”³è¯‰é€šå¸¸äºŽ7ä¸ªè‡ªç„¶æ—¥å†…åé¦ˆå¤æ‚æƒ…å½¢å¯é€‚åº¦å»¶é•¿ï¼Œå¹¶åœ¨é€šçŸ¥ä¸­è¯´æ˜ŽåŽŸå› ã€‚
- **è®°å½•ç•™å­˜**ï¼šå‡ºäºŽåˆè§„ä¸Žå®¡è®¡éœ€è¦ï¼Œè¿è§„ä¸Žç”³è¯‰è®°å½•å°†ä¾æ³•ç•™å­˜ä¸€å®šæœŸé™ã€‚

## é‡‘èžæ´»åŠ¨ã€ä¼—ç­¹ä¸ŽæŠ½å¥–

- **é‡‘èžåˆè§„**ï¼šæ¶‰åŠç†è´¢ã€å€Ÿè´·ã€ä»£æŠ•ç­‰å†…å®¹å¿…é¡»æŒæœ‰åˆæ³•èµ„è´¨ä¸Žé£Žé™©æŠ«éœ²ï¼›é«˜é£Žé™©é‡‘èžå†…å®¹åŽŸåˆ™ä¸Šç¦æ­¢ã€‚
- **ä¼—ç­¹è§„èŒƒ**ï¼šéœ€æŠ«éœ²å‘èµ·äººã€ç”¨é€”ã€æ‰˜ç®¡ä¸Žé€€æ¬¾æœºåˆ¶ï¼›å¹³å°æœ‰æƒè¦æ±‚è¡¥å……è¯æ˜Žæˆ–ä¸­æ­¢æ´»åŠ¨ã€‚
- **æŠ½å¥–è§„åˆ™**ï¼šæ˜Žç¡®è¯´æ˜Žå¥–å“ã€ä»½é¢ã€è§„åˆ™ã€å¼€å¥–æ—¶é—´ä¸Žæ–¹å¼ï¼›ç¦æ­¢"æ— æ³•æ ¸éªŒçš„éšæœºå¼€å¥–"ã€‚

## äº‰è®®è§£å†³ä¸Žé€‚ç”¨æ³•å¾‹

- **åˆè§„éµå¾ª**ï¼šç”¨æˆ·åœ¨ä½¿ç”¨ç¤¾åŒºæœåŠ¡æ—¶ï¼Œåº”éµå®ˆä¸­åŽäººæ°‘å…±å’Œå›½ç›¸å…³æ³•å¾‹æ³•è§„åŠç›‘ç®¡æ”¿ç­–ã€‚
- **å¸æ³•ååŠ©**ï¼šå¯¹æ¶‰å«Œè¿æ³•çŠ¯ç½ªçš„ä¿¡æ¯ï¼Œå¹³å°å°†ä¾æ³•é…åˆç›¸å…³æœºå…³è°ƒæŸ¥å–è¯ã€‚
- **äº‰è®®è§£å†³**ï¼šå¦‚å‘ç”Ÿäº‰è®®ï¼Œä¼˜å…ˆå‹å¥½åå•†ï¼›åå•†ä¸æˆçš„ï¼Œæäº¤å¹³å°æ‰€åœ¨åœ°æœ‰ç®¡è¾–æƒçš„äººæ°‘æ³•é™¢ã€‚

## å®šä¹‰

- **æœªæˆå¹´äºº**ï¼šæŒ‡æœªæ»¡18å‘¨å²çš„è‡ªç„¶äººã€‚
- **AIGC**ï¼šä½¿ç”¨ç®—æ³•æ¨¡åž‹è‡ªåŠ¨ç”Ÿæˆæˆ–æ·±åº¦åˆæˆçš„æ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ã€è§†é¢‘ç­‰å†…å®¹ã€‚
- **æ•æ„Ÿä¿¡æ¯**ï¼šåŒ…æ‹¬ä½†ä¸é™äºŽèº«ä»½è¯ä»¶å·ã€è”ç³»æ–¹å¼ã€ä½å€ã€é“¶è¡Œå¡å·ã€ç²¾ç¡®åœ°ç†ä½ç½®ã€å¥åº·ä¸Žç”Ÿç‰©è¯†åˆ«ä¿¡æ¯ç­‰ã€‚

## ä¿®è®¢ä¸Žç”Ÿæ•ˆ

- **åŠ¨æ€æ›´æ–°**ï¼šä¸ºäº†æ›´å¥½åœ°åæ˜ ç¤¾åŒºçŽ¯å¢ƒä¸Žæ³•å¾‹å˜åŒ–ï¼Œæœ¬å…¬çº¦å¯èƒ½ä¸å®šæœŸä¿®è®¢ï¼›é‡å¤§å˜æ›´å°†ä»¥ç«™å†…é€šçŸ¥ç­‰å½¢å¼æç¤ºã€‚
- **ç”Ÿæ•ˆæ¡æ¬¾**ï¼šæ›´æ–°åŽçš„å…¬çº¦å‘å¸ƒå³ç”Ÿæ•ˆã€‚å¦‚ä¸åŒæ„æ›´æ–°å†…å®¹ï¼Œè¯·åœæ­¢ä½¿ç”¨ç¤¾åŒºæœåŠ¡ã€‚

## è”ç³»æˆ‘ä»¬

å¦‚å¯¹æœ¬å…¬çº¦æœ‰ç–‘é—®ã€å»ºè®®æˆ–æŠ•è¯‰ï¼Œè¯·é€šè¿‡åº”ç”¨å†…"æ„è§åé¦ˆ"æˆ–å®¢æœæ¸ é“è”ç³»æˆ‘ä»¬ã€‚

â€” æ„Ÿè°¢æ¯ä¸€ä½ä¸ºç¤¾åŒºå»ºè®¾å‡ºåŠ›çš„ä½  â€”
"""

    var body: some View {
        VStack(spacing: 0) {
            // è‡ªå®šä¹‰å¯¼èˆªæ 
            customNavigationBar

            ScrollView {
                VStack(alignment: .leading, spacing: 0) {
                    // ä½¿ç”¨ MarkdownTextView æ¸²æŸ“ Markdown å†…å®¹
                    MarkdownTextView(text: conventionMarkdown)
                        .padding(.horizontal, 20)
                        .padding(.top, 20)
                        .padding(.bottom, 20)
                }
            }
        }
        .onAppear {
            print("ðŸ§­ CommunityConventionView onAppear - navigationPath.count = \(navigationPath.count)")
        }
    }

    // MARK: - è‡ªå®šä¹‰å¯¼èˆªæ 
    private var customNavigationBar: some View {
        HStack {
            Button(action: {
                if navigationPath.count > 0 {
                    navigationPath.removeLast()
                } else {
                    dismiss()
                }
            }) {
                Image(systemName: "chevron.left")
                    .font(.system(size: 20, weight: .medium))
                    .foregroundColor(.primary)
                    .frame(width: 44, height: 44)
            }

            Spacer()

            Text("ç¤¾åŒºå…¬çº¦")
                .font(.headline)
                .fontWeight(.semibold)

            Spacer()

            Color.clear.frame(width: 44, height: 44)
        }
        .padding(.horizontal, 16)
        .padding(.vertical, 8)
        .background(Color(.systemBackground))
    }
}

# 腾讯优量汇开屏广告接入说明

## 当前完成状态

✅ **已完成的步骤：**
1. SDK文件已复制到项目的 `qinghe/Frameworks/` 目录
2. 创建了 `GDTAdManager.swift` 广告管理器（目前为占位符实现）
3. 创建了 `SplashAdView.swift` 开屏广告视图
4. 已集成到应用启动流程（`qingheApp.swift`）
5. 项目编译成功，无报错

## 需要完成的步骤

### 1. 在Xcode中添加框架依赖

**重要：** 需要手动在Xcode中添加框架，因为命令行无法完成此操作。

1. 打开 `qinghe.xcodeproj`
2. 选择项目根节点 → 选择 `qinghe` target → `General` 标签
3. 在 `Frameworks, Libraries, and Embedded Content` 部分点击 `+`
4. 点击 `Add Other...` → `Add Files...`
5. 导航到 `qinghe/Frameworks/` 目录
6. 选择以下框架并添加：
   - `GDTMobSDK.xcframework`
   - `Tquic.xcframework`
7. 确保两个框架的 `Embed` 设置为 `Do Not Embed`

### 2. 添加系统框架依赖

在同一个界面继续添加以下系统框架：
- `AdSupport.framework`
- `CoreLocation.framework`
- `CoreTelephony.framework`
- `Security.framework`
- `SystemConfiguration.framework`
- `WebKit.framework`
- `StoreKit.framework`
- `AVFoundation.framework`
- `CoreMedia.framework`
- `CoreVideo.framework`
- `QuartzCore.framework`

### 3. 配置Build Settings

1. 在项目设置中选择 `Build Settings`
2. 搜索 `Other Linker Flags`
3. 添加 `-ObjC` 标志

### 4. 配置Info.plist

在 `Info.plist` 中添加以下配置：

```xml
<key>NSAppTransportSecurity</key>
<dict>
    <key>NSAllowsArbitraryLoads</key>
    <true/>
</dict>
```

### 5. 启用真实的广告功能

完成框架添加后，需要修改 `GDTAdManager.swift`：

1. 取消注释第3行：`// import GDTMobSDK`
2. 取消注释所有被注释的GDT相关代码
3. 替换占位符实现为真实的SDK调用
4. 在腾讯优量汇后台获取真实的 `AppID` 和广告位ID，替换文件中的占位符

### 6. 获取腾讯优量汇账号信息

1. 访问 [腾讯优量汇开发者平台](https://e.qq.com/dev/)
2. 注册并创建应用
3. 获取 `AppID`
4. 创建开屏广告位，获取广告位ID
5. 将这些信息替换到 `GDTAdManager.swift` 中的占位符

## 当前的文件结构

```
qinghe/
├── Frameworks/
│   ├── GDTMobSDK.xcframework
│   └── Tquic.xcframework
├── qinghe/
│   ├── GDTAdManager.swift          # 广告管理器（占位符实现）
│   ├── SplashAdView.swift          # 开屏广告视图
│   └── qingheApp.swift             # 已集成广告流程
```

## 测试流程

完成上述配置后：

1. 编译项目确保无错误
2. 在模拟器或真机上运行
3. 观察启动流程：启动画面 → 开屏广告 → 主界面
4. 检查控制台日志，确认广告加载和显示状态

## 注意事项

1. **测试环境**：开发阶段建议使用测试广告位ID
2. **网络权限**：确保应用有网络访问权限
3. **隐私政策**：根据应用商店要求添加相应的隐私说明
4. **广告展示时机**：当前设置为每次启动都展示，可根据需求调整

## 下一步建议

1. 先完成Xcode中的框架添加
2. 获取腾讯优量汇账号和广告位信息
3. 启用真实的SDK功能
4. 进行完整测试
5. 根据需要添加其他广告形式（横幅、插屏等）

完成这些步骤后，开屏广告功能就能正常工作了！
